<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power Fix - Pagamento</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <img src="logo-powerfix.png" alt="Power Fix Logo" class="main-logo-flat small-logo"> <h2 class="selection-title">Efetue o Pagamento</h2>
        <p class="subtitle">Escaneie o código abaixo para iniciar a recarga.</p>

        <div class="payment-details">
            <div class="qr-code-container">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=PowerFix-Simulado" alt="QR Code de Pagamento">
            </div>
            <p class="timer">Você tem <span id="countdown">5:00</span> para realizar o pagamento.</p>
        </div>

        <button id="simulate-payment-btn" class="simulate-btn">Simular Pagamento Aprovado</button>
        
        <button class="back-btn" onclick="window.history.back();">← Voltar</button>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const time = params.get('time');

            // Implementar temporizador de 5 minutos
            let countdownSeconds = 5 * 60; // 5 minutos
            const countdownElement = document.getElementById('countdown');

            const updateCountdown = () => {
                const minutes = Math.floor(countdownSeconds / 60);
                const seconds = countdownSeconds % 60;
                countdownElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (countdownSeconds <= 0) {
                    clearInterval(countdownInterval);
                    alert('Tempo para pagamento esgotado! Por favor, tente novamente.');
                    window.location.href = 'index.html'; // Redireciona de volta ao início
                } else {
                    countdownSeconds--;
                }
            };

            const countdownInterval = setInterval(updateCountdown, 1000);
            updateCountdown(); // Chama uma vez imediatamente para exibir o tempo

            document.getElementById('simulate-payment-btn').addEventListener('click', function() {
                clearInterval(countdownInterval); // Para o timer ao simular pagamento
                alert('Pagamento simulado com sucesso! Redirecionando...');
                window.location.href = `confirmation.html?time=${time}`;
            });
        });
    </script>
</body>
</html>
